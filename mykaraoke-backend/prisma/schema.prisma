// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             Int    @id @default(autoincrement())
  email          String @unique
  hashedPassword String
}

model Resume {
  id            Int             @id @default(autoincrement())
  name          String
  email         String
  phone         String
  githubLink    String
  portfolioLink String
  summary       String
  skills        Keyword[]
  experiences   Experience[]
  projects      Project[]
  education     Education[]
  certification Certification[]
  JobListing    JobListing?     @relation(fields: [jobListingId], references: [id])
  jobListingId  Int?
}

model Experience {
  id          Int     @id @default(autoincrement())
  companyName String
  location    String
  title       String
  date        String
  summary     String
  Resume      Resume? @relation(fields: [resumeId], references: [id])
  resumeId    Int?
}

model Project {
  id       Int     @id @default(autoincrement())
  link     String
  summary  String
  Resume   Resume? @relation(fields: [resumeId], references: [id])
  resumeId Int?
}

model Education {
  id             Int     @id @default(autoincrement())
  schoolName     String
  schoolLocation String
  date           String
  coursework     String
  degree         String
  Resume         Resume? @relation(fields: [resumeId], references: [id])
  resumeId       Int?
}

model Certification {
  id           Int     @id @default(autoincrement())
  name         String
  organization String
  date         String
  Resume       Resume? @relation(fields: [resumeId], references: [id])
  resumeId     Int?
}

model JobListing {
  id             Int       @id @default(autoincrement())
  title          String
  company        String
  description    String
  specialization String?
  level          String?
  postingDate    DateTime?
  crawlDate      DateTime?
  location       String?
  salary         String?
  listingLink    String?
  applyLink      String?
  source         String?
  sourceId       String?
  keywords       Keyword[]
  resumes        Resume[]

  @@unique([source, sourceId])
}

model Keyword {
  name        String       @id
  jobListings JobListing[]
  categories  Category[]
  resumes     Resume[]
}

model Category {
  name     String    @id
  keywords Keyword[]
}
